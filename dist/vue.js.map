{"version":3,"file":"vue.js","sources":["../src/compiler/parse.js","../src/compiler/index.js","../src/observe/array.js","../src/observe/index.js","../src/proxy.js","../src/initState.js","../src/vdom/index.js","../src/lifycycle.js","../src/initMixin.js","../src/index.js"],"sourcesContent":["const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\r\nconst attribute =\r\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\n\r\nexport const ELEMENT_TYPE = 1;\r\nexport const TEXT_TYPE = 3;\r\n\r\nexport function parseHTML(html) {\r\n  const stack = [];\r\n  let root, currentParent;\r\n\r\n  function createAstElement(tag, attrs) {\r\n    return {\r\n      tag,\r\n      type: ELEMENT_TYPE,\r\n      attrs,\r\n      parent: null,\r\n      children: [],\r\n    };\r\n  }\r\n\r\n  function startHandle(tag, attrs) {\r\n    const node = createAstElement(tag, attrs);\r\n\r\n    if (currentParent) {\r\n      node.parent = currentParent;\r\n      currentParent.children.push(node);\r\n    }\r\n\r\n    if (!root) {\r\n      root = node;\r\n    }\r\n\r\n    stack.push(node);\r\n    currentParent = node;\r\n  }\r\n\r\n  function charsHandle(text) {\r\n    currentParent.children.push({\r\n      type: TEXT_TYPE,\r\n      text,\r\n      parent: currentParent,\r\n    });\r\n  }\r\n\r\n  function endHandle(tag) {\r\n    stack.pop();\r\n    currentParent = stack[stack.length - 1];\r\n  }\r\n\r\n  function advance(n) {\r\n    html = html.substring(n);\r\n  }\r\n\r\n  function parseStartTag() {\r\n    const start = html.match(startTagOpen);\r\n\r\n    if (start) {\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: [],\r\n      };\r\n\r\n      startHandle(match.tagName, match.attrs);\r\n      advance(start[0].length);\r\n\r\n      let end, attr;\r\n      while (\r\n        !(end = html.match(startTagClose)) &&\r\n        (attr = html.match(attribute))\r\n      ) {\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5],\r\n        });\r\n        advance(attr[0].length);\r\n      }\r\n\r\n      if (end) {\r\n        end[1] === \"/\" && endHandle(start[1]);\r\n        advance(end[0].length);\r\n      }\r\n\r\n      return match;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  while (html) {\r\n    const textEnd = html.indexOf(\"<\");\r\n    if (textEnd === 0) {\r\n      // 标签开始或者结束位置\r\n      const startTagMatch = parseStartTag();\r\n\r\n      if (startTagMatch) {\r\n        continue;\r\n      }\r\n\r\n      const endTagMatch = html.match(endTag);\r\n\r\n      if (endTagMatch) {\r\n        endHandle(endTagMatch[1]);\r\n        advance(endTagMatch[0].length);\r\n        continue;\r\n      }\r\n    } else {\r\n      // 文本节点开始\r\n      let text;\r\n\r\n      if (textEnd > 0) {\r\n        text = html.substring(0, textEnd);\r\n      } else {\r\n        text = html;\r\n      }\r\n\r\n      if (text) {\r\n        charsHandle(text);\r\n        advance(text.length);\r\n      }\r\n    }\r\n  }\r\n\r\n  return root;\r\n}\r\n","import { ELEMENT_TYPE, parseHTML, TEXT_TYPE } from \"./parse\";\r\nvar defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\n\r\nfunction toS(str) {\r\n  return JSON.stringify(str);\r\n}\r\n\r\nfunction genElement(ast) {\r\n  let code = `_c(${toS(ast.tag)},{${ast.attrs ? genProps(ast.attrs) : \"\"}}${\r\n    ast.children && ast.children.length > 0\r\n      ? `,${ast.children.map((item) => codeGen(item)).join(\",\")}`\r\n      : \"\"\r\n  })`;\r\n  return code;\r\n}\r\n\r\nfunction genProps(obj) {\r\n  let propsStrArr = [];\r\n\r\n  obj.forEach(({ name, value }) => {\r\n    switch (name) {\r\n      case \"style\":\r\n        let styleStrArr = [];\r\n        value.split(\";\").forEach((item) => {\r\n          const [cssname, cssvalue] = item.split(\":\");\r\n          styleStrArr.push(`${toS(cssname.trim())}:${toS(cssvalue.trim())}`);\r\n        });\r\n\r\n        propsStrArr.push(`\"style\":{${styleStrArr.join(\",\")}}`);\r\n\r\n        break;\r\n\r\n      default:\r\n        propsStrArr.push(\r\n          `${toS(name.trim())}:${toS(\r\n            value ?? \"\" === \"\" ? value : value.trim()\r\n          )}`\r\n        );\r\n        break;\r\n    }\r\n  });\r\n\r\n  return propsStrArr.join(\",\");\r\n}\r\nfunction codeGen(ast) {\r\n  let code;\r\n\r\n  if (ast.type === ELEMENT_TYPE) {\r\n    code = genElement(ast);\r\n  }\r\n\r\n  if (ast.type === TEXT_TYPE) {\r\n    const text = ast.text;\r\n    const tokens = [];\r\n    let token;\r\n\r\n    let lastIndex = 0;\r\n\r\n    defaultTagRE.lastIndex = 0;\r\n    while ((token = defaultTagRE.exec(text))) {\r\n\r\n      const curIndex = token.index;\r\n      if (curIndex > lastIndex) {\r\n        tokens.push(toS(text.slice(lastIndex, curIndex)));\r\n      }\r\n\r\n      tokens.push(`_s(${token[1].trim()})`);\r\n\r\n      lastIndex = curIndex+token[0].length;\r\n    }\r\n\r\n    if (lastIndex < text.length) {\r\n      tokens.push(toS(text.slice(lastIndex)));\r\n    }\r\n\r\n    code = `_v(${tokens.join(\"+\")})`;\r\n  }\r\n\r\n  return code;\r\n}\r\n\r\nexport const compileToFunction = function (html) {\r\n  const ast = parseHTML(html);\r\n\r\n const code =  codeGen(ast);\r\n return new Function(`with(this){ return ${code}}`)\r\n};\r\n","import { observe } from \"./index\";\n\nconst oldArrayProto = Array.prototype;\n\nexport const newArrayProto = Object.create(oldArrayProto);\n\nconst methods = [\n  \"push\",\n  \"pop\",\n  \"shift\",\n  \"unshift\",\n  \"reserve\",\n  \"sort\",\n  \"splice\",\n];\n\nmethods.forEach((method) => {\n  newArrayProto[method] = function (...args) {\n    const res = oldArrayProto[method].call(this, ...args);\n\n    const ob = this.__ob__;\n\n    let addItems = [];\n    switch (method) {\n      case \"push\":\n      case \"unshift\":\n        addItems = args;\n        break;\n      case \"splice\":\n        addItems = args.slice(2);\n        break;\n      default:\n        break;\n    }\n    ob.observeArray(addItems);\n\n    return res;\n  };\n});\n","import { newArrayProto } from \"./array\";\n\nclass Observer {\n  constructor(data) {\n\n    Object.defineProperty(data,'__ob__',{\n      value:this,\n      enumerable:false\n    })\n    if (Array.isArray(data)) {\n      this.observeArray(data)\n    } else {\n      this.walk(data);\n    }\n  }\n\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n\n  observeArray(data){\n\n    data.__proto__ = newArrayProto\n\n    data.forEach(item=>observe(item))\n\n  }\n}\n\nexport const defineReactive = function (target, key, value) {\n  // 递归\n  observe(value);\n\n  Object.defineProperty(target, key, {\n    get() {\n      return value;\n    },\n    set(newVal) {\n      if (newVal === value) return;\n      observe(newVal);\n      value = newVal;\n    },\n  });\n};\n\nexport const observe = function (data) {\n\n  if (typeof data !== \"object\" || data === null) {\n    return;\n  }\n\n  if(data.__ob__){\n    return data.__ob__\n  }\n  \n  new Observer(data);\n};\n","export const proxy = function (vm, targetKey) {\n  const target = vm[targetKey];\n\n  if (typeof target !== \"object\" || target === null) {\n    return;\n  }\n\n  Object.keys(target).forEach((key) => {\n    Object.defineProperty(vm, key, {\n      get() {\n        return target[key];\n      },\n      set(newVal) {\n        if (target[key] === newVal) return;\n        target[key] = newVal;\n      },\n    });\n  });\n};\n","import { observe } from \"./observe/index.js\";\nimport { proxy } from \"./proxy\";\n\nexport const initState = function (vm) {\n  let data = vm.$options.data;\n  data = typeof data === \"function\" ? data.call(vm) : data;\n  vm._data = data;\n\n  observe(data)\n\n  // 数据代理\n  proxy(vm, \"_data\");\n};\n","export function createElementVNode(vm, tag, props = {}, ...children) {\r\n  const key = props.key;\r\n\r\n  if (key) {\r\n    delete props.key;\r\n  }\r\n\r\n  return vnode(vm, tag, key, props, children);\r\n}\r\n\r\nexport function createTextVNode(vm, text) {\r\n  return vnode(vm, undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\nfunction vnode(vm, tag, key, data, children, text) {\r\n  return {\r\n    vm,\r\n    tag,\r\n    key,\r\n    data,\r\n    children,\r\n    text,\r\n  };\r\n}\r\n","import { createElementVNode, createTextVNode } from \"./vdom/index\";\r\n\r\nexport function initLiftCycle(Vue) {\r\n  Vue.prototype._c = function (tag, attrs, children) {\r\n    return createElementVNode(this, ...arguments);\r\n  };\r\n\r\n  Vue.prototype._v = function () {\r\n    return createTextVNode(this, ...arguments);\r\n  };\r\n\r\n  Vue.prototype._s = function (value) {\r\n    if (typeof value !== \"object\") return value;\r\n    return JSON.stringify(value);\r\n  };\r\n\r\n  Vue.prototype._render = function () {\r\n    const vm = this,\r\n      render = vm.$options.render;\r\n\r\n    return render.call(vm);\r\n  };\r\n\r\n  Vue.prototype._update = function (vnode) {\r\n    console.log(vnode);\r\n    const vm = this;\r\n    const el = vm.$el;\r\n    vm.$el = patch(el, vnode);\r\n  };\r\n}\r\n\r\nfunction createElement(vnode) {\r\n  if (typeof vnode.tag === \"string\") {\r\n    vnode.el = document.createElement(vnode.tag);\r\n\r\n    patchProps(vnode.el, vnode.data);\r\n\r\n    vnode.children.forEach((child) => {\r\n      vnode.el.appendChild(createElement(child));\r\n    });\r\n  } else {\r\n    vnode.el = document.createTextNode(vnode.text);\r\n  }\r\n\r\n  return vnode.el;\r\n}\r\nfunction patchProps(el, props) {\r\n  Object.keys(props).forEach((key) => {\r\n    switch (key) {\r\n      case \"style\":\r\n        Object.keys(props.style).forEach((key) => {\r\n          el.style[key] = props.style[key];\r\n        });\r\n        break;\r\n\r\n      default:\r\n        el.setAttribute(key, props[key]);\r\n        break;\r\n    }\r\n  });\r\n}\r\nfunction patch(oldVNode, vnode) {\r\n  const isRealNode = oldVNode.nodeType;\r\n  if (isRealNode) {\r\n    const elm = oldVNode,\r\n      parentElm = elm.parentNode;\r\n\r\n    const newElm = createElement(vnode);\r\n\r\n    parentElm.insertBefore(newElm, elm.nextSibling);\r\n\r\n    parentElm.removeChild(elm);\r\n    return newElm;\r\n  } else {\r\n  }\r\n}\r\n\r\nexport const mountComponent = function (vm, el) {\r\n  vm.$el = el;\r\n  const vnode = vm._render();\r\n  vm._update(vnode);\r\n};\r\n","import { compileToFunction } from \"./compiler/index\";\nimport { initState } from \"./initState\";\nimport { mountComponent } from \"./lifycycle\";\n\n\nexport const initMixin = function (Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = options;\n\n    // 初始化数据\n    initState(vm);\n\n    \n    // 挂载\n    if(options.el){\n      vm.$mount(options.el)\n    }\n  };\n\n\n  Vue.prototype.$mount = function (el) {\n    el = document.querySelector(el)\n    const vm = this\n    let ops = vm.$options\n    if(!ops.render){\n      let template\n       if(ops.template&&el){\n        template = ops.template\n      }else if(el){\n          template = el.outerHTML\n      }\n\n      if(template){\n       ops.render =  compileToFunction(template)\n      }\n    }\n    \n\n    mountComponent(vm,el)\n  }\n};\n","import { initMixin } from \"./initMixin\";\nimport { initLiftCycle } from \"./lifycycle\";\n\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\ninitLiftCycle(Vue);\n\nexport default Vue;\n"],"names":["ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","ELEMENT_TYPE","TEXT_TYPE","parseHTML","html","stack","root","currentParent","createAstElement","tag","attrs","type","parent","children","startHandle","node","push","charsHandle","text","endHandle","pop","length","advance","n","substring","parseStartTag","start","match","tagName","end","attr","name","value","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","toS","str","JSON","stringify","genElement","ast","code","genProps","map","item","codeGen","join","obj","propsStrArr","forEach","styleStrArr","split","cssname","cssvalue","trim","tokens","token","lastIndex","exec","curIndex","index","slice","compileToFunction","Function","oldArrayProto","Array","prototype","newArrayProto","Object","create","methods","method","args","res","call","ob","__ob__","addItems","observeArray","Observer","data","defineProperty","enumerable","isArray","walk","keys","key","defineReactive","__proto__","observe","target","get","set","newVal","proxy","vm","targetKey","initState","$options","_data","createElementVNode","props","vnode","createTextVNode","undefined","initLiftCycle","Vue","_c","arguments","_v","_s","_render","render","_update","console","log","el","$el","patch","createElement","document","patchProps","child","appendChild","createTextNode","style","setAttribute","oldVNode","isRealNode","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibling","removeChild","mountComponent","initMixin","_init","options","$mount","querySelector","ops","template","outerHTML"],"mappings":"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"}